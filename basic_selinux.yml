#
# Only for RedHat based systems
#
# Switch to permissive mode
# TODO: enforced
---
- hosts: all

  tasks:
    - name: Install selinux packages
      yum: name=$item state=installed
      with_items:
        - libsemanage
        - setools-libs-python
        - policycoreutils-python
        - libselinux-python
      when: ansible_os_family == "RedHat"
      tags:
        - packages

    - name: Set selinux permissive policy
      lineinfile: dest=/etc/sysconfig/selinux
                regexp='^SELINUX='
                line='SELINUX=permissive'
                backup=yes
      when: ansible_os_family == "RedHat"
      tags:
        - policy
